@startuml Diagramme d'activité de la modification d'un rendez-vous
title Modifier un rendez-vous via l'API

|c|Client
|s|Serveur
|b|Support de stockage

|c|
start
:Faire une requête PUT /rendez-vous/{id} avec les informations de suppression du rendez-vous;

|s|
:Verifier l'authentification de l'utilisateur;
if (L'utilisateur est authentifié ?) then (non)
    :Envoyer une réponse d'erreur 401 Unauthorized au client;
else (oui)
    :Valider le format des données de modification du rendez-vous;
    if (Les données sont valides ?) then (non)
        :Envoyer une réponse d'erreur 400 Bad Request au client;
    else (oui)
        |b|
        :Vérifier l'existence du rendez-vous;
        |s|
        if (Le rendez-vous existe ?) then (non)
            :Envoyer une réponse d'erreur 404 Not Found au client;
        else (oui)
            |b|
            :Récupérer le droit de l'utilisateur sur l'agenda associé au rendez-vous;
            |s|
            if (L'utilisateur a le droit de modifier l'agenda ?) then (non)
                :Envoyer une réponse d'erreur 403 Forbidden au client;
            else (oui)
                |b|
                :Mettre à jour le rendez-vous dans le support de stockage;
                |s|
                if (Le rendez-vous est supprimé ?) then (non)
                    :Envoyer une réponse d'erreur 500 Internal Server Error au client;
                else (oui)
                    :Envoyer une réponse 204 No Content au client;
                endif
            endif
        endif
    endif
endif

stop
@enduml