@startuml Diagramme d'activité de la création d'un rendez-vous
title Créer un rendez-vous via l'API

|c|Client
|s|Serveur
|b|Support de stockage

|c|
start
:Faire une requête POST /rendez-vous/create avec les informations de création du rendez-vous;

|s|
:Verifier l'authentification de l'utilisateur;
if (L'utilisateur est authentifié ?) then (non)
    :Envoyer une réponse d'erreur 401 Unauthorized au client;
else (oui)
    :Valider le format des données du rendez-vous;
    if (Les données sont valides ?) then (non)
        :Envoyer une réponse d'erreur 400 Bad Request au client;
    else (oui)
        |b|
        :Vérifier l'existence de l'agenda du rendez-vous;
        |s|
        if (L'agenda existe ?) then (non)
            :Envoyer une réponse d'erreur 404 Not Found au client;
        else (oui)
            |b|
            :Récupérer le droit de l'utilisateur sur l'agenda;
            |s|
            if (L'utilisateur a le droit de modifier l'agenda ?) then (non)
                :Envoyer une réponse d'erreur 403 Forbidden au client;
            else (oui)
                |b|
                :Enregistrer le rendez-vous dans le support de stockage;
                |s|
                if (Le rendez-vous est enregistré ?) then (non)
                    :Envoyer une réponse d'erreur 500 Internal Server Error au client;
                else (oui)
                    :Envoyer une réponse 201 Created avec le rendez-vous créé au client;
                endif
            endif
        endif
    endif
endif

stop
@enduml